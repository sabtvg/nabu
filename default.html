<!DOCTYPE html>
<meta charset="utf-8">
<html>
<head>
    <title>Nab&uacute</title>
    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
    <script src="js/d3.min.js"></script>
    <script src="js/arbol.js"></script>
    <script src="js/main.js"></script>
    <script src="js/util.js"></script>
    <script src="js/decidimos.js"></script>
    <script src="js/aprendemos.js"></script>
    <script src="js/common.js"></script>
    <script src="js/tween.min.js"></script>
    <link rel="stylesheet" type="text/css" href="styles.css">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
    <meta name="description" content="Herramienta para la toma de decisiones democraticas en grandes grupos cooperativos">
    <meta name="robots" content="index,follow">
    <meta name="keywords" content="democracia directa,democracia interactiva,democracia participativa,generador de consensos,cooperativa 2.0,cooperativa integral catalana" />
</head>
<body onload="doLoad();" style="overflow:hidden"  onresize="resize()">

    <!--login--------------------------------------------------------------------------------------------------->
    <img id="loginFlor" src="res/logo.png" style="visibility:hidden; position:absolute;"/>
    <div id="loginIn" class="ventana" style="visibility:hidden;position:absolute; width: 400px; height: 260px; text-align:center;">
        <a href="help.html" target="_blank" style="color:black;text-decoration:none;">
            <span class="titulo1" style="cursor: pointer;"><font color="blue" size="2">[?]</font>Nab&uacute;</span>
        </a><br />
        <span class="titulo3">Democracia interactiva</span><br />
        <input id="email" type="text" class="txt" placeholder="email" value="" /><br />
        <input id="clave" type="password" class="txt" placeholder="clave" value=""/><br />
        <select id="grupos" class="txt" style="width: 200px;"></select><br />
        <input type="button" class="btn" value="Entrar" onclick="doLogin();" /><br />
        <div id="loginResponse">&nbsp;</div>
        <div onclick="doAltaUsuario();" style="color:blue; cursor: pointer;">Alta de usuario</div>
        <div onclick="document.location='creararbol.html';" style="color:blue; cursor: pointer;">Crear nuevo grupo</div>
    </div>
    <div id="tip" class="tip" style="visibility:hidden;position:absolute; text-align:center; display: table-cell; vertical-align: middle"></div>

    <!--modelos documento--------------------------------------------------------------------------------------------------->
    <div id="modelos" class="center" style="visibility: hidden;" >
        <div class="ventana" style="text-align:center;">
            <span class="titulo1">Modelos de debate</span><br />
            <div id="modelosList"></div><br />
            <input type="button" value="Cancelar" class="btn" onclick="document.getElementById('modelos').style.visibility = 'hidden';" style="margin: 0 auto;" />
        </div>             
    </div>

    <!--objetivo--------------------------------------------------------------------------------------------------->
    <div id="objetivo" class="objetivo"></div>

    <!--pie--------------------------------------------------------------------------------------------------->
    <div id="pie" style="padding: 5px; position: absolute; font-size: 10px; visibility: hidden;">
        <a href="simulacion.html">ver simulacion</a> - 
        Desarrollo:<a href="http://cooperativa.cat" target="_blank">CIC</a> - 
        01/11/2015 - 
        <a href="mailto:lania@cooperativa.cat">lania@cooperativa.cat</a> - 
        Mejor visto en <a target="_blank" href="https://www.google.com/chrome/browser/desktop/index.html">Google Chrome</a> -
        <font color="red">versi&oacute;n beta</font> - 
        <a href="javascript:doOpen('help.html');">Ayuda</a> -
        <a href="https://github.com/sabtvg/nabu" target="_blank">fork me</a>
    </div>

    <!--no soportado--------------------------------------------------------------------------------------------------->
    <div id="noSoportado" style="visibility: hidden; position: absolute; top: 30px; left:30px;">
        <div class="ventana">
            <table>
                <tr>
                    <td>
                        <img src="res/icono2.png" />
                    </td>
                    <td id="noSoportadoMsg" class="titulo3">
                        Nab&uacute; no puede mostrarse<br /> en este navegador
                    </td>
                </tr>
            </table>
        </div>
    </div>

    <!--node options--------------------------------------------------------------------------------------------------->
    <div id="menuNode" class="menu">
        <table>
            <tr>  
                <td class="menu2">
                    <img class="btnimg" title="ver documento" src="res/documento.png" onclick="doVerDocumento();" />
                    <img class="btnimg" title="poner/quitar flor" src="res/quitarflor.png" onclick="doToggleFlor();" />
                </td>
            </tr>
        </table>
    </div>

    <!--root node options--------------------------------------------------------------------------------------------------->
    <div id="menuRoot" class="menuRoot2">
        <img class="btnimg" title="proponer" src="res/documento.png" onclick="seleccionarModelo();" />
    </div>

    <!--joystick--------------------------------------------------------------------------------------------------->
    <div id="joystick" style="visibility:hidden; padding: 5px; text-align:right; position: absolute; left:10px; top:0px;">
        <table>
            <tr>
                <td><img src="res/jzm.png" style='cursor:pointer;' onclick="zoom(10);"  /></td>
                <td><img src="res/ju.png" style='cursor:pointer;' onmousedown="pany(-5);" onmouseup="clearInterval(joyInterval);" /></td>
                <td></td>
            </tr>
            <tr>
                <td><img src="res/jl.png" style='cursor:pointer;' onmousedown="panx(-5);" onmouseup="clearInterval(joyInterval);" /></td>
                <td><img src="res/j00.png" style='cursor:pointer;' onclick="translateArbol(translatex = 0, translatey = 0)" /></td>
                <td><img src="res/jr.png" style='cursor:pointer;' onmousedown="panx(5);" onmouseup="clearInterval(joyInterval);" /></td>
            </tr>
            <tr>
                <td><img src="res/jzl.png" style='cursor:pointer;' onclick="zoom(-10);" /></td>
                <td><img src="res/jd.png" style='cursor:pointer;' onmousedown="pany(5);" onmouseup="clearInterval(joyInterval);" /></td>
                <td></td>
            </tr>
        </table>
    </div>

    <!--titulo--------------------------------------------------------------------------------------------------->
    <div id="titulo" style="visibility:hidden; padding: 10px; width: 250px; text-align:right; position: absolute; left:0px; top:0px;">
        <a href="help.html" target="_blank" style="color:black;text-decoration:none;">
            <div id="titulo0" class="titulo0" style="cursor: pointer;"><font color="blue" size="2">[?]</font><nobr>Nab&uacute;</nobr></div>
        </a>
        <div id="titulo1" class="titulo1"><nobr>Cooperativa 2.0</nobr></div>
        <div id="titulo2" class="titulo2"><nobr>Democracia interactiva</nobr></div>
        <div id="userOptions">
            <div class="titulo3" style="cursor: pointer;" onclick="document.location='verusuarios.html';"><nobr><font color="blue">Usuarios</font></nobr></div>
        </div>
        <div id="adminOptions">
            <div class="titulo3" style="cursor: pointer;" onclick="document.location='modificararbol.html';"><nobr><font color="blue">Arbol</font></nobr></div>
            <div class="titulo3" style="cursor: pointer;" onclick="document.location='usuarios.html';"><nobr><font color="blue">Usuarios</font></nobr></div>
            <div class="titulo3" style="cursor: pointer;" onclick="document.location='mailer.html';"><nobr><font color="blue">Mailer</font></nobr></div>
        </div>
        <div id="msgDiv" class="msg"></div>
    </div>

    <!--panel consenso--------------------------------------------------------------------------------------------------->
    <div id="panelConsenso"  class="borde" style="visibility:hidden; padding: 5px; position: absolute; left:10px; top:210px; color: gray; border: 1px solid gray; margin: 0px;">
    </div>

    <!--panel grupo--------------------------------------------------------------------------------------------------->
    <div id="panelGrupo"  class="borde" style="visibility:hidden; padding: 5px; position: absolute; left:10px; top:210px; color: gray; border: 1px solid gray; margin: 0px;">
    </div>

    <!--menuppal--------------------------------------------------------------------------------------------------->
    <div id="menuppal" style="position: absolute; visibility:hidden; width: 800px; height: 600px;">
        <div id="tituloppal" style="position: inherit; width:800px; left:0px; top:-90px;text-align: center;" class="titulo0"></div>
        <img id="ciclo" class="btnimg" src="res/ciclo.png" style="position: inherit; left:159px; top:47px;" />
        <img id="ppal1" class="btnimg" src="res/es/debates.png" style="position: inherit; left:15px; top:145px;" onclick="doDecidimos();"/>
        <img id="ppal2" class="btnimg" src="res/es/noticias.png" style="position: inherit; left:15px; top:192px;" onclick="doAprendemos();"/>
        <img id="ppal3" class="btnimg" src="res/es/vert.png" style="position: inherit; left:488px; top:129px;" onclick="msg('Aun no implementado');"/>
        <img id="ppal5" class="btnimg" src="res/es/docConsensos.png" style="position: inherit; left:338px; top:31px;" onclick="doListaConsensos();"/>
        <img id="ppal7" class="btnimg" src="res/es/docRealizacion.png" style="position: inherit; left:285px; top:439px;" onclick="msg('Aun no implementado');"/>
        <img id="ppal8" class="btnimg" src="res/es/manifiesto.png" style="position: inherit; left:190px; top:278px;"/>
        <img id="ppal9" class="btnimg" src="res/doc.png" style="position: inherit; left:120px; top:258px;" onclick="doManifiesto();"/>
        <img id="ppal10" class="btnimg" src="res/es/politico.png" style="position: inherit; left:190px; top:278px;"/>
        <img id="ppal11" class="btnimg" src="res/es/operativo.png" style="position: inherit; left:120px; top:258px;" />
    </div>

    <!--atras--------------------------------------------------------------------------------------------------->
    <img id="atras" class="btnimg" title="Atras" src="res/atras.png" style="visibility:hidden; position: absolute; left:10px; top:10px;" onclick="doAtras();" />

    <!--aprendemos--------------------------------------------------------------------------------------------------->
    <div id="aprendemos" style="left: 0px; top: 0px; width:100%; height:100%"></div>


    <!--panel flores--------------------------------------------------------------------------------------------------->
    <div id="panelUsuario" style="visibility: hidden; position: absolute; left: 10px; top: 120px;">
        <table>
            <tr>
                <td id="usuario" colspan="2" style="font-size: 25px; font-weight: bold;"></td>
            </tr>
            <tr>
                <td style="width: 25px;"><img src="res/icono2.png" /></td>
                <td id="floresDisponibles" style="font-size: 25px; font-weight: bold;">5</td>
            </tr>
        </table>      
    </div>

    <!--cambiar clave--------------------------------------------------------------------------------------------------->
    <div id="cambiarClave" class="ventana" style="position: absolute; width: 230px; text-align:center; visibility: hidden;">
        <span class="titulo2">Cambio de clave</span><br />
        <input id="oldPass" type="password" class="txt" placeholder="Clave actual" value="" /><br />
        <input id="newPass" type="password" class="txt" placeholder="Nueva clave" value=""/><br />
        <input id="repeat" type="password" class="txt" placeholder="Repitela" value=""/><br />
        <input type="button" class="btn" value="Cambiar" onclick="doCambiarClave();" /><input type="button" class="btn" value="Cancelar" onclick="doHideCambiarClave();" /><br />
        <div id="cambiarClaveMsg"></div>
    </div>

    <!--alta usuario--------------------------------------------------------------------------------------------------->
    <div id="altaUsuario" class="ventana" style="position: absolute; width: 330px; height: 330px; text-align:center; visibility: hidden; opacity: 1;">
        <span class="titulo2">Alta de usuario</span><br /><br />
        El alta de usuarios es administrada manualmente.<br /><br />
        Selecciona el grupo<br /> y completa tus datos.<br />
        Recibiras un email con tus datos de acceso.<br /><br />
        <select id="altaUsuarioGrupos" class="txt" style="width: 200px;"></select><br />
        <input id="altaUsuarioNombre" type="text" class="txt" placeholder="Nombre completo" value="" /><br />
        <input id="altaUsuarioEmail" type="text" class="txt" placeholder="Email" value="" /><br />
        <input type="button" class="btn" value="Enviar solicitud" onclick="doAltaUsuarioEnviar();" />
        <input type="button" class="btn" value="Cerrar" onclick="efectoTop(document.getElementById('altaUsuario'), 0, window.innerHeight / 2 - 330 / 2, -380, TWEEN.Easing.Cubic.Out);" /><br />
        <div id="altaUsuarioMsg"></div>
    </div>
        
    <!--lista consensos--------------------------------------------------------------------------------------------------->
    <div id="panelListaConsensos" style="visibility: hidden;position:absolute;width:1024px;" >
    </div>

    <!--documento--------------------------------------------------------------------------------------------------->
    <div id="documento" class="documento" style="top: -1000px;">
    </div>

    <!--panel--------------------------------------------------------------------------------------------------->
    <div id="panelDer" class="panel" style="visibility: hidden;">
        <table style="width: 95%;">
            <tr>
                <td style="text-align: right;"><img id="Img1" style="cursor: pointer;" src="res/close.png" onclick="hidePanelDer();" /></td>
            </tr>
            <tr>
                <td id="panelDer2">
                </td>
            </tr>
        </table>
    </div>
    <div id="panelIzq" class="panel" style="visibility: hidden;">
        <table style="width: 95%;">
            <tr>
                <td style="text-align: right;"><img id="Img2" style="cursor: pointer;" src="res/close.png" onclick="hidePanelIzq();" /></td>
            </tr>
            <tr>
                <td id="panelIzq2">
                </td>
            </tr>
        </table>
    </div>

    <!--help--------------------------------------------------------------------------------------------------->
    <div id="help" class="documento" style="opacity: 1; width: 800px; height: 650px;">
        <table style="width: 100%;">
            <tr><td style="text-align: right;"><img style="cursor: pointer;" src="res/close.png" onclick="doCloseHelp();" /></td></tr>
            <tr><td id="helpContent"></td></tr>
        </table>
    </div>


    <!--florwait--------------------------------------------------------------------------------------------------->
    <img id="florWait" src="res/florWait.gif" style="visibility: hidden;position:absolute;" />

    <!--demoMsg--------------------------------------------------------------------------------------------------->
    <div id="demoMsg" style="visibility:hidden; padding: 10px; text-align:left; position: absolute; left:0px; top:110px;color:red;" class="titulo1">
        Modulo en desarrollo<br />Version demo<br />No operativa
    </div>

    <!--confirmar quitar ultima flor--------------------------------------------------------------------------------------------------->
    <div id="ultimaFlor" style="visibility: hidden;position:absolute;width:300px;" >
        <div class="ventana" style="text-align:center;">
            <span id="Span1" class="titulo2">Si quitas la &uacute;ltima flor la propuesta dejar&aacute; de existir</span><br /><br />
            <input type="button" value="Aceptar" class="btn" onclick="document.getElementById('ultimaFlor').style.visibility = 'Hidden'; doToggleFlor2();" />
            <input type="button" value="Cancelar" class="btn" onclick="document.getElementById('ultimaFlor').style.visibility = 'Hidden';" />
        </div>             
    </div>

</body>
</html>